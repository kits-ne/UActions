env:
  COMPANY: tiny
  PRODUCT_NAME: UnityLane2
steps:
  injection:
    uses: injection
    with:
      path: Assets/InjectSample.asset
      data:
        url: "https://google.com"
        key: 333=-====Snd3d30_3433
        number: !!int 11111
jobs:
  injection:
    platform: android
    steps:
      - name: injection
      - uses: get-version
      - uses: log
        with:
          message: $(VERSION)
  debug-apk:
    platform: android
    steps:
      - uses: player-settings
        with:
          company-name: $(COMPANY)_2
          product-name: $(PRODUCT_NAME)
          preset: Assets/PlayerSettings
      - uses: player-settings-android
        with:
          package-name: com.$(COMPANY).$(PRODUCT_NAME)
          architectures: !architectures
            - "ARMv7"
            - "ARM64"
      - uses: build
        with:
          path: $(PROJECT_PATH)/Build/$(PLATFORM)/$(PRODUCT_NAME)
  build-apk:
    platform: android
    steps:
      - uses: player-settings
        with:
          company-name: $(COMPANY)_2
          product-name: $(PRODUCT_NAME)
          preset: Assets/PlayerSettings
      - uses: player-settings-android
        with:
          package-name: com.$(COMPANY).$(PRODUCT_NAME)
          architectures: !architectures
            - "ARMv7"
            - "ARM64"
          keystore: !keystore
            path: $(KEYSTORE_PATH)
            passwd: $(KEYSTORE_PASSWD)
            alias: $(KEYSTORE_ALIAS)
            alias-passwd: $(KEYSTORE_ALIAS_PASSWD)
          increment-version-code: true
      - uses: build
        with:
          path: $(PROJECT_PATH)/Build/$(PLATFORM)/$(PRODUCT_NAME)
  run-command:
    platform: android
    steps:
      - uses: command
        with:
          args: "echo start"
      - uses: command
        with:
          args: "pwd"
  with-fastlane:
    platform: android
    log-file: $(PROJECT_PATH)/workflow.log
    steps:
      - uses: print
        with:
          message: $(PROJECT_PATH)\fastlane
      - uses: command
        with:
          args: fastlane custom_lane
          working-directory: $(PROJECT_PATH)\fastlane
  ios-test:
    platform: android
    steps:
      - uses: player-settings-ios
        with:
          target-sdk: !iossdkversion SimulatorSDK
      